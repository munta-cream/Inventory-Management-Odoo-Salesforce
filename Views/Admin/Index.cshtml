@model List<Inventory_Management_Requirements.Models.ApplicationUser>
@{
    ViewData["Title"] = "Admin - User Management";
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">User Management</h2>
        <div>
            <a asp-action="Statistics" class="btn btn-info me-2">
                <i class="fas fa-chart-bar"></i> System Stats
            </a>
            <a asp-controller="Home" asp-action="Index" class="btn btn-secondary me-2">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <form asp-area="Identity" asp-page="/Account/Logout"
                asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })" method="post" class="d-inline">
                <button type="submit" class="btn btn-outline-danger">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </form>
        </div>
    </div>

    <div class="mb-3">
        <a asp-action="Create" class="btn btn-primary">Create New User</a>
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Is Admin</th>
                <th>Is Blocked</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model)
            {
                <tr>
                    <td>@user.UserName</td>
                    <td>@user.Email</td>
                    <td>@user.IsAdmin</td>
                    <td>@user.IsBlocked</td>
                    <td>
                        <form asp-action="ToggleBlock" method="post" class="d-inline">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@user.Id" />
                            <button type="submit" class="btn btn-sm @(user.IsBlocked ? "btn-success" : "btn-secondary")">
                                @(user.IsBlocked ? "Unblock" : "Block")
                            </button>
                        </form>
                        <form asp-action="ToggleAdmin" method="post" class="d-inline">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@user.Id" />
                            <button type="submit" class="btn btn-sm @(user.IsAdmin ? "btn-warning" : "btn-info")">
                                @(user.IsAdmin ? "Remove Admin" : "Make Admin")
                            </button>
                        </form>
                        <a asp-action="Delete" asp-route-id="@user.Id" class="btn btn-sm btn-danger">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
